ERROR io_services_utils.py:796 Socket EOF; <socket.socket fd=13, family=AddressFamily.AF_INET6, type=SocketKind.SOCK_STREAM, proto=6, laddr=('::1', 51258, 0, 0), raddr=('::1', 5672, 0, 0)>
ERROR base_connection.py:445 Transport indicated EOF.
ERROR base_connection.py:428 connection_lost: StreamLostError: ('Transport indicated EOF',)
ERROR blocking_connection.py:521 Unexpected connection close detected: StreamLostError: ('Transport indicated EOF',)
ERROR _server.py:453 Exception calling application: module 'docker' has no attribute 'DockerClient'
Traceback (most recent call last):
  File "/Users/chenxingyang/opt/anaconda3/envs/flask/lib/python3.8/site-packages/grpc/_server.py", line 443, in _call_behavior
    response_or_iterator = behavior(argument, context)
  File "/Users/chenxingyang/PycharmProjects/0049-server-python/app/server/instance_server.py", line 42, in GetInstanceInfo
    status = docker_utils.get_container_status(request.instance_id)
  File "/Users/chenxingyang/PycharmProjects/0049-server-python/app/utils/docker_utils.py", line 75, in get_container_status
    client = docker.DockerClient()
AttributeError: module 'docker' has no attribute 'DockerClient'
ERROR _server.py:453 Exception calling application: module 'docker' has no attribute 'DockerClient'
Traceback (most recent call last):
  File "/Users/chenxingyang/opt/anaconda3/envs/flask/lib/python3.8/site-packages/grpc/_server.py", line 443, in _call_behavior
    response_or_iterator = behavior(argument, context)
  File "/Users/chenxingyang/PycharmProjects/0049-server-python/app/server/instance_server.py", line 42, in GetInstanceInfo
    status = docker_utils.get_container_status(request.instance_id)
  File "/Users/chenxingyang/PycharmProjects/0049-server-python/app/utils/docker_utils.py", line 75, in get_container_status
    client = docker.DockerClient()
AttributeError: module 'docker' has no attribute 'DockerClient'
ERROR _server.py:453 Exception calling application: 'function' object has no attribute 'get'
Traceback (most recent call last):
  File "/Users/chenxingyang/opt/anaconda3/envs/flask/lib/python3.8/site-packages/grpc/_server.py", line 443, in _call_behavior
    response_or_iterator = behavior(argument, context)
  File "/Users/chenxingyang/PycharmProjects/0049-server-python/app/server/instance_server.py", line 42, in GetInstanceInfo
    status = docker_utils.get_container_status(request.instance_id)
  File "/Users/chenxingyang/PycharmProjects/0049-server-python/app/utils/docker_utils.py", line 78, in get_container_status
    container = client.containers.get(container_name_or_id)
AttributeError: 'function' object has no attribute 'get'
ERROR _server.py:453 Exception calling application: module 'docker' has no attribute 'DockerClient'
Traceback (most recent call last):
  File "/Users/chenxingyang/opt/anaconda3/envs/flask/lib/python3.8/site-packages/grpc/_server.py", line 443, in _call_behavior
    response_or_iterator = behavior(argument, context)
  File "/Users/chenxingyang/PycharmProjects/0049-server-python/app/server/instance_server.py", line 42, in GetInstanceInfo
    status = docker_utils.get_container_status(request.instance_id)
  File "/Users/chenxingyang/PycharmProjects/0049-server-python/app/utils/docker_utils.py", line 75, in get_container_status
    client = docker.DockerClient()
AttributeError: module 'docker' has no attribute 'DockerClient'
ERROR _server.py:453 Exception calling application: module 'docker' has no attribute 'DockerClient'
Traceback (most recent call last):
  File "/Users/chenxingyang/opt/anaconda3/envs/flask/lib/python3.8/site-packages/grpc/_server.py", line 443, in _call_behavior
    response_or_iterator = behavior(argument, context)
  File "/Users/chenxingyang/PycharmProjects/0049-server-python/app/server/instance_server.py", line 42, in GetInstanceInfo
    status = docker_utils.get_container_status(request.instance_id)
  File "/Users/chenxingyang/PycharmProjects/0049-server-python/app/utils/docker_utils.py", line 75, in get_container_status
    client = docker.DockerClient()
AttributeError: module 'docker' has no attribute 'DockerClient'
ERROR _server.py:453 Exception calling application: 'function' object has no attribute 'get'
Traceback (most recent call last):
  File "/Users/chenxingyang/opt/anaconda3/envs/flask/lib/python3.8/site-packages/grpc/_server.py", line 443, in _call_behavior
    response_or_iterator = behavior(argument, context)
  File "/Users/chenxingyang/PycharmProjects/0049-server-python/app/server/instance_server.py", line 42, in GetInstanceInfo
    status = docker_utils.get_container_status(request.instance_id)
  File "/Users/chenxingyang/PycharmProjects/0049-server-python/app/utils/docker_utils.py", line 78, in get_container_status
    container = client.containers.get(container_name_or_id)
AttributeError: 'function' object has no attribute 'get'
ERROR _server.py:453 Exception calling application: {'message': 'invalid reference format'}
Traceback (most recent call last):
  File "/Users/chenxingyang/opt/anaconda3/envs/flask/lib/python3.8/site-packages/grpc/_server.py", line 443, in _call_behavior
    response_or_iterator = behavior(argument, context)
  File "/Users/chenxingyang/PycharmProjects/0049-server-python/app/server/instance_server.py", line 34, in CreateImage
    image = docker_utils.build_image(image_to_build_path, f"{request.repository}:{request.tag}")
  File "/Users/chenxingyang/PycharmProjects/0049-server-python/app/utils/docker_utils.py", line 9, in build_image
    image, build_logs = client.images.build(path=dockerfile_path, tag=tag)
  File "/Users/chenxingyang/opt/anaconda3/envs/flask/lib/python3.8/site-packages/docker/models/images.py", line 317, in build
    raise BuildError(last_event or 'Unknown', result_stream)
docker.errors.BuildError: {'message': 'invalid reference format'}
ERROR _server.py:453 Exception calling application: "host" network_mode is incompatible with port_bindings
Traceback (most recent call last):
  File "/Users/chenxingyang/opt/anaconda3/envs/flask/lib/python3.8/site-packages/grpc/_server.py", line 443, in _call_behavior
    response_or_iterator = behavior(argument, context)
  File "/Users/chenxingyang/PycharmProjects/0049-server-python/app/server/instance_server.py", line 14, in CreateInstance
    container = docker_utils.run_container(request.image_name, request.url)
  File "/Users/chenxingyang/PycharmProjects/0049-server-python/app/utils/docker_utils.py", line 36, in run_container
    container = client.containers.run(image_name, ports={f'5005/tcp': port}, detach=True, network_mode="host")
  File "/Users/chenxingyang/opt/anaconda3/envs/flask/lib/python3.8/site-packages/docker/models/containers.py", line 858, in run
    container = self.create(image=image, command=command,
  File "/Users/chenxingyang/opt/anaconda3/envs/flask/lib/python3.8/site-packages/docker/models/containers.py", line 916, in create
    create_kwargs = _create_container_args(kwargs)
  File "/Users/chenxingyang/opt/anaconda3/envs/flask/lib/python3.8/site-packages/docker/models/containers.py", line 1140, in _create_container_args
    create_kwargs['host_config'] = HostConfig(**host_config_kwargs)
  File "/Users/chenxingyang/opt/anaconda3/envs/flask/lib/python3.8/site-packages/docker/types/containers.py", line 337, in __init__
    raise host_config_incompatible_error(
docker.errors.InvalidArgument: "host" network_mode is incompatible with port_bindings
ERROR _server.py:453 Exception calling application: "host" network_mode is incompatible with port_bindings
Traceback (most recent call last):
  File "/Users/chenxingyang/opt/anaconda3/envs/flask/lib/python3.8/site-packages/grpc/_server.py", line 443, in _call_behavior
    response_or_iterator = behavior(argument, context)
  File "/Users/chenxingyang/PycharmProjects/0049-server-python/app/server/instance_server.py", line 14, in CreateInstance
    container = docker_utils.run_container(request.image_name, request.url)
  File "/Users/chenxingyang/PycharmProjects/0049-server-python/app/utils/docker_utils.py", line 36, in run_container
    container = client.containers.run(image_name, ports={f'5005/tcp': port}, detach=True, network_mode="host")
  File "/Users/chenxingyang/opt/anaconda3/envs/flask/lib/python3.8/site-packages/docker/models/containers.py", line 858, in run
    container = self.create(image=image, command=command,
  File "/Users/chenxingyang/opt/anaconda3/envs/flask/lib/python3.8/site-packages/docker/models/containers.py", line 916, in create
    create_kwargs = _create_container_args(kwargs)
  File "/Users/chenxingyang/opt/anaconda3/envs/flask/lib/python3.8/site-packages/docker/models/containers.py", line 1140, in _create_container_args
    create_kwargs['host_config'] = HostConfig(**host_config_kwargs)
  File "/Users/chenxingyang/opt/anaconda3/envs/flask/lib/python3.8/site-packages/docker/types/containers.py", line 337, in __init__
    raise host_config_incompatible_error(
docker.errors.InvalidArgument: "host" network_mode is incompatible with port_bindings
ERROR _server.py:453 Exception calling application: 500 Server Error for http+docker://localhost/v1.43/containers/fd97830ae73629856dec18eac1b59150031184b9c72e2382857081cf3931e676/start: Internal Server Error ("driver failed programming external connectivity on endpoint suspicious_ramanujan (eefcd928279b67c424c54a4a24f66ee6bfd9727b0f4b909801e2e9db7218fe52): Bind for 0.0.0.0:15006 failed: port is already allocated")
Traceback (most recent call last):
  File "/Users/chenxingyang/opt/anaconda3/envs/flask/lib/python3.8/site-packages/docker/api/client.py", line 268, in _raise_for_status
    response.raise_for_status()
  File "/Users/chenxingyang/opt/anaconda3/envs/flask/lib/python3.8/site-packages/requests/models.py", line 1021, in raise_for_status
    raise HTTPError(http_error_msg, response=self)
requests.exceptions.HTTPError: 500 Server Error: Internal Server Error for url: http+docker://localhost/v1.43/containers/fd97830ae73629856dec18eac1b59150031184b9c72e2382857081cf3931e676/start

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/chenxingyang/opt/anaconda3/envs/flask/lib/python3.8/site-packages/grpc/_server.py", line 443, in _call_behavior
    response_or_iterator = behavior(argument, context)
  File "/Users/chenxingyang/PycharmProjects/0049-server-python/app/server/instance_server.py", line 14, in CreateInstance
    container = docker_utils.run_container(request.image_name, request.url)
  File "/Users/chenxingyang/PycharmProjects/0049-server-python/app/utils/docker_utils.py", line 36, in run_container
    container = client.containers.run(image_name, ports={f'5005/tcp': port}, detach=True)
  File "/Users/chenxingyang/opt/anaconda3/envs/flask/lib/python3.8/site-packages/docker/models/containers.py", line 865, in run
    container.start()
  File "/Users/chenxingyang/opt/anaconda3/envs/flask/lib/python3.8/site-packages/docker/models/containers.py", line 406, in start
    return self.client.api.start(self.id, **kwargs)
  File "/Users/chenxingyang/opt/anaconda3/envs/flask/lib/python3.8/site-packages/docker/utils/decorators.py", line 19, in wrapped
    return f(self, resource_id, *args, **kwargs)
  File "/Users/chenxingyang/opt/anaconda3/envs/flask/lib/python3.8/site-packages/docker/api/container.py", line 1127, in start
    self._raise_for_status(res)
  File "/Users/chenxingyang/opt/anaconda3/envs/flask/lib/python3.8/site-packages/docker/api/client.py", line 270, in _raise_for_status
    raise create_api_error_from_http_exception(e) from e
  File "/Users/chenxingyang/opt/anaconda3/envs/flask/lib/python3.8/site-packages/docker/errors.py", line 39, in create_api_error_from_http_exception
    raise cls(e, response=response, explanation=explanation) from e
docker.errors.APIError: 500 Server Error for http+docker://localhost/v1.43/containers/fd97830ae73629856dec18eac1b59150031184b9c72e2382857081cf3931e676/start: Internal Server Error ("driver failed programming external connectivity on endpoint suspicious_ramanujan (eefcd928279b67c424c54a4a24f66ee6bfd9727b0f4b909801e2e9db7218fe52): Bind for 0.0.0.0:15006 failed: port is already allocated")
ERROR _common.py:88 Exception serializing message!
Traceback (most recent call last):
  File "/Users/chenxingyang/opt/anaconda3/envs/flask/lib/python3.8/site-packages/grpc/_common.py", line 86, in _transform
    return transformer(message)
TypeError: descriptor 'SerializeToString' for 'google.protobuf.pyext._message.CMessage' objects doesn't apply to a 'NoneType' object
ERROR _common.py:88 Exception serializing message!
Traceback (most recent call last):
  File "/Users/chenxingyang/opt/anaconda3/envs/flask/lib/python3.8/site-packages/grpc/_common.py", line 86, in _transform
    return transformer(message)
TypeError: descriptor 'SerializeToString' for 'google.protobuf.pyext._message.CMessage' objects doesn't apply to a 'NoneType' object
ERROR _common.py:88 Exception serializing message!
Traceback (most recent call last):
  File "/Users/chenxingyang/opt/anaconda3/envs/flask/lib/python3.8/site-packages/grpc/_common.py", line 86, in _transform
    return transformer(message)
TypeError: descriptor 'SerializeToString' for 'google.protobuf.pyext._message.CMessage' objects doesn't apply to a 'NoneType' object
ERROR _common.py:88 Exception serializing message!
Traceback (most recent call last):
  File "/Users/chenxingyang/opt/anaconda3/envs/flask/lib/python3.8/site-packages/grpc/_common.py", line 86, in _transform
    return transformer(message)
TypeError: descriptor 'SerializeToString' for 'google.protobuf.pyext._message.CMessage' objects doesn't apply to a 'NoneType' object
ERROR _common.py:88 Exception serializing message!
Traceback (most recent call last):
  File "/Users/chenxingyang/opt/anaconda3/envs/flask/lib/python3.8/site-packages/grpc/_common.py", line 86, in _transform
    return transformer(message)
TypeError: descriptor 'SerializeToString' for 'google.protobuf.pyext._message.CMessage' objects doesn't apply to a 'NoneType' object
ERROR _common.py:88 Exception serializing message!
Traceback (most recent call last):
  File "/Users/chenxingyang/opt/anaconda3/envs/flask/lib/python3.8/site-packages/grpc/_common.py", line 86, in _transform
    return transformer(message)
TypeError: descriptor 'SerializeToString' for 'google.protobuf.pyext._message.CMessage' objects doesn't apply to a 'NoneType' object
ERROR _common.py:88 Exception serializing message!
Traceback (most recent call last):
  File "/Users/chenxingyang/opt/anaconda3/envs/flask/lib/python3.8/site-packages/grpc/_common.py", line 86, in _transform
    return transformer(message)
TypeError: descriptor 'SerializeToString' for 'google.protobuf.pyext._message.CMessage' objects doesn't apply to a 'NoneType' object
ERROR _common.py:88 Exception serializing message!
Traceback (most recent call last):
  File "/Users/chenxingyang/opt/anaconda3/envs/flask/lib/python3.8/site-packages/grpc/_common.py", line 86, in _transform
    return transformer(message)
TypeError: descriptor 'SerializeToString' for 'google.protobuf.pyext._message.CMessage' objects doesn't apply to a 'NoneType' object
